#!/bin/bash

# Exit immediately on error
set -e

echo "ğŸ“¦ Scaling messaging-app deployment to 3 replicas..."
kubectl scale deployment messaging-app --replicas=3

echo "âœ… Deployment scaled."

echo "ğŸ” Verifying running pods..."
kubectl get pods -l app=messaging-app

echo "ğŸ” Performing load test using wrk..."
wrk -t2 -c10 -d10s http://localhost:8000

echo "ğŸ“Š Monitoring resource usage..."
kubectl top pods
